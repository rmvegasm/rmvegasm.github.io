[
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "Blog",
    "section": "",
    "text": "R\n\n\nwordcloud\n\n\nrtweet\n\n\ntutorial\n\n\n\n\n\n\n\n\n\n\n\nSep 17, 2022\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/posts/wordcloud/index.html",
    "href": "blog/posts/wordcloud/index.html",
    "title": "A rudimentary wordcloud from twitter data",
    "section": "",
    "text": "In this post I’ll build a wordcloud from twitter texts. I’ll be using the amazing rtweet package to access the twitter API. At the time of writing, rtweet can only acces the version 1 of the API, from which there is possible to obtain a single table with the query results. Version 2 allows for much more control on the query output but is not yet implemented in rtweet and I wanted to try it out ;)\nThe wordcloud is a powerfull way to visualize word frequencies in a text and grasp something about the topics covered within. To build it we need a list of words and the frequency for each of them. There is much more than it seems to this, but as a first naive approximation one could just separate each document into single words and build a table from that. This is exactly what this post will cover."
  },
  {
    "objectID": "blog/posts/wordcloud/index.html#write-a-summary-and-conclusion-here",
    "href": "blog/posts/wordcloud/index.html#write-a-summary-and-conclusion-here",
    "title": "A rudimentary wordcloud from twitter data",
    "section": "Write a summary and conclusion here",
    "text": "Write a summary and conclusion here\n\n\n\n\nComplete Code\n\n## ----r------------------------------------------------------------------------\nlibrary('rtweet')\n# Authenticate the currently logged-in user and store credentials, this needs to\n# be done only once per machine:\n# rtweet::auth_setup_default()\n\n# Do not perform query if results are already stored:\ntbl_file = 'tweets_tbl.rds'\ntweets_file = 'tweets.csv'\n\nif (file.exists(tweets_file)) {\n  tweets = read.csv(tweets_file)\n} else {\n  tweets = rtweet::search_tweets(\n    'chile -filter:quote -filter:media lang:es',\n    n = 2000,\n    include_rts = FALSE,\n    retryonratelimit = TRUE\n  )\n  # let's save the tibble just in case and write a csv ommiting list cols\n  saveRDS(tweets, tbl_file)\n  tweets = tweets[, sapply(tweets, class) != 'list'] |> as.data.frame()\n  write.csv(tweets, tweets_file, row.names = FALSE)\n}\n\n\n\n\n\n\n\n\n\n\n\n\n## ----r------------------------------------------------------------------------\nis_link = function (x) grepl('^[[:lower:]]+://.+', x)\nis_hashtag = function (x) grepl('^#.+', x)\nis_mention = function (x) grepl('^@.+', x)\nis_number = function (x) grepl('^[[:digit:]]+[[:punct:]]*$', x)\n\n\n\n\n\n\n\n\n\n\n## ----r------------------------------------------------------------------------\nextract_words = function (x) {\n  x = x[!is_link(x)]\n  x = x[!is_hashtag(x)]\n  x = x[!is_mention(x)]\n  x = x[!is_number(x)]\n  x = lapply(x, gsub, pattern = '[^[:alnum:]]', replacement = '') |> unlist()\n  x = x[x != '']\n  tolower(x)\n}\n\n\n\n\n## ----r------------------------------------------------------------------------\nclean_tweets = tweets[['full_text']] |>\n  strsplit(split = '[[:space:]+]') |>\n  lapply(extract_words)\n\nwords = lapply(clean_tweets, function (x) {\n  n = nchar(x)\n  x[n >= 5 & n <= 10]\n})\n\nword_bag = unlist(words)\n\n\n\n\n## ----r------------------------------------------------------------------------\nword_bag = local({\n  query = 'chile'\n  word_bag[!(word_bag %in% query)]\n})\n\n\n## ----r------------------------------------------------------------------------\nlibrary('wordcloud2')\nlibrary('wesanderson')\n\nwf = local({\n  wb = table(word_bag)\n  word = names(wb)\n  freq = as.numeric(wb)\n  data.frame(word, freq)[freq >= 10, ]\n})\n\n# Nice colors from 'The Darjeeling Express'\nclrs = rep(wesanderson::wes_palette('Darjeeling1', 5), length.out = nrow(wf))\n\nwordcloud2::wordcloud2(wf,\n  background = 'transparent',\n  color = clrs,\n  size = .3)"
  },
  {
    "objectID": "blog/about.html",
    "href": "blog/about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Rodrigo M. Vega",
    "section": "",
    "text": "This is my personal site, feel free to wonder around ;)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About Me",
    "section": "",
    "text": "I’m a self-taught R programmer with a strong research background. I love learning, take pride in finding new and creative solutions to problems, fixing broken things and explaining complex ideas in very simple terms. I thrive by helping others."
  }
]